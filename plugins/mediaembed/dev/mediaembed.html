<!DOCTYPE html>
<!--
Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
-->
<html>
<head>
	<meta charset="utf-8">
	<title>Media Embed &ndash; CKEditor Sample</title>
	<script src="../../../ckeditor.js"></script>
	<link href="../../../samples/sample.css" rel="stylesheet">
</head>
<body>
	<h1 class="samples">
		CKEditor Sample &mdash; Media Embed
	</h1>
	<div>
		Output strategy:
		<select id="strategy" onchange="stratUpdate( this );">
			<option value="default" selected="selected">Default</option>
			<option value="oembed">Oembed</option>
		</select>
	</div>
	<style type="text/css">
	body > p > textarea{ display: none; }
	textarea#editor1{ display: inline; }
	div.source{ display: none; }
	</style>
	<p>
		<textarea id="editor1"></textarea>
	</p>

	<div class="source" id="content_oembed">
		<oembed>https://gist.github.com/leedo/796300</oembed>
		<p>xxx</p>
		<oembed>http://twitter.com/#!/leed0/status/65058247593299968</oembed>
		<p>yyy</p>
	</div>
	<div class="source" id="content_default">
		<div data-oembed-url="https://gist.github.com/leedo/796300">
<div class="noembed-embed-inner noembed-gist">
<h3>gistfile1.pl</h3>

<div class="gist-file">
<table class="highlighttable">
	<tbody>
		<tr>
			<td class="linenos">
			<div class="linenodiv">
			<pre>
1
2
3
4
5
6
7
8
9</pre>
			</div>
			</td>
			<td class="code">
			<div class="highlight">
			<pre>
<span class="n">get</span> <span class="s">"/{tweet:[0-9]+}"</span> <span class="o">=&gt;</span> <span class="k">sub </span><span class="p">{</span>
  <span class="k">my</span> <span class="p">(</span><span class="nv">$req</span><span class="p">,</span> <span class="nv">$res</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
  <span class="k">my</span> <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$req</span><span class="o">-&gt;</span><span class="n">captures</span><span class="o">-&gt;</span><span class="p">{</span><span class="n">tweet</span><span class="p">};</span>

  <span class="nv">$ua</span><span class="o">-&gt;</span><span class="n">get</span><span class="p">(</span><span class="s">"statuses/show/$id"</span><span class="p">,</span> <span class="k">sub </span><span class="p">{</span>
	<span class="k">my</span> <span class="p">(</span><span class="nv">$hdr</span><span class="p">,</span> <span class="nv">$tweet</span><span class="p">,</span> <span class="nv">$reason</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="nv">$res</span><span class="o">-&gt;</span><span class="nb">send</span><span class="p">(</span><span class="s">"&lt;pre&gt;"</span><span class="o">.</span><span class="n">Dumper</span><span class="p">(</span><span class="nv">$tweet</span><span class="p">)</span><span class="o">.</span><span class="s">"&lt;/pre&gt;"</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre>
			</div>
			</td>
		</tr>
	</tbody>
</table>
</div>
</div>
</div>

<p>xxx</p>

<div data-oembed-url="http://twitter.com/#!/leed0/status/65058247593299968">
<div class="noembed-embed-inner noembed-twitter">
<div class="tweet_main">
<div class="tweet_user">
<div class="tweet_image"><a href="http://www.twitter.com/leed0" target="_blank"><img height="36" src="https://noembed.com/i/http://pbs.twimg.com/profile_images/2287126174/2pimnixok5hz26utqc7t_normal.jpeg" width="36" /> </a></div>

<div class="tweet_name"><a href="http://www.twitter.com/leed0" target="_blank"><span class="tweet_screen_name">general lee</span><br />
<span class="tweet_real_name">leed0</span> </a></div>
</div>

<div class="tweet_text">
<div>Just got upgraded to perl 5.12.3 on my Debian testing install, cool!</div>
</div>

<div class="tweet_info"><a href="http://www.twitter.com/leed0/status/65058247593299968" target="_blank"><span class="tweet_created_at" id="noembed-timestamp-e30770447d3fbb67b0c510da0e369d35ff581db0">Mon May 02 14:21:09 +0000 2011</span> </a> via

<div>web</div>
</div>
</div>
<script type="text/javascript">
  var months = ['Jan','Feb','Mar','Apr','May','June','July','Aug','Sept','Oct','Nov','Dec'];
  var elem = document.getElementById("noembed-timestamp-e30770447d3fbb67b0c510da0e369d35ff581db0");
  var date = new Date(elem.innerHTML);

  if (date) {
	var hours = date.getHours();
	var minutes = date.getMinutes();
	if (minutes < 10) minutes = "0"+minutes.toString();

	elem.innerHTML =  hours + ":" + minutes+ " " + (months[date.getMonth()])
				   + " " + date.getDate() + ", " + date.getFullYear();
  }</script>
</div>
</div>

<p>yyy</p>
	</div>
	<script>
		function stratUpdate( stratPicker ) {
			stratPicker.disabled = true;
			if ( CKEDITOR.instances.editor1 ) {
				CKEDITOR.instances.editor1.destroy();
			}

			editor = CKEDITOR.replace( 'editor1', {
				allowedContent: true,
				extraPlugins: 'mediaembed',
				mediaembed_output: stratPicker.value,
				height: 500,
				on: {
					instanceReady: function( evt ) {
						stratPicker.disabled = false;
					}
				}
			} );
			editor.setData( document.getElementById( 'content_' + stratPicker.value ).innerHTML );
		}

		stratUpdate( document.getElementById( 'strategy' ) );
	</script>
</body>
</html>
